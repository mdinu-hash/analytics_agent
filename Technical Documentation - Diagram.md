# Analytics Agent - LangGraph Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                          Analytics Agent - LangGraph Architecture                                              │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

[START] ──► ┌─────────────┐ ──► ┌─────────────────────┐
            │orchestrator │     │extract_analytical   │
            │(Decision    │     │_intent              │  
            │ Logic)      │     │(Ambiguity Detection)│
            └─────┬───────┘     └─────────┬───────────┘
                  │                       │
       ┌──────────┼──────────┐            │
       │          │          │            │
       ▼          ▼          ▼            ▼
┌────────────┐ ┌────────────┐ ┌─────────────────────┐ ┌─────────────────────┐
│Scenario B  │ │Scenario C  │ │Clear Intent         │ │Ambiguous Intent     │
│Pleasantries│ │No Data     │ │        │            │ │                     │
│     │      │ │     │      │ │        ▼            │ │            │          │
│     ▼      │ │     ▼      │ │┌─────────────────────┐│ │          ▼          │
│┌──────────┐│ │┌──────────┐│ ││create_sql_query_or  ││ │ ┌─────────────────┐ │
││generate  ││ ││generate  ││ ││_queries             ││ │ │generate_answer  │ │
││ answer   ││ ││ answer   ││ ││         │           ││ │ │(Clarification)  │ │
││          ││ ││          ││ ││         ▼           ││ │ │                 │ │
│└─────┬────┘│ │└─────┬────┘│ ││┌─────────────────────┐││ │ └────────┬──────┘ │
└──────┼─────┘ └──────┼─────┘ │││execute_sql_query    │││ └──────────┼────────┘
       │              │       │││+ Error Handling     │││            │
       │              │       │││+ Token Management   │││            │
       │              │       ││└─────────┬───────────┘││            │
       │              │       ││          │            ││            │
       │              │       ││          ▼            ││            │
       │              │       ││┌─────────────────────┐││            │
       │              │       │││generate_answer      │││            │
       │              │       │││(Data Insights)      │││            │
       │              │       ││└─────────┬───────────┘││            │
       │              │       │└──────────┼────────────┘│            │
       │              │       └───────────┼─────────────┘            │
       │              │                   │                          │
       └──────────────┼───────────────────┼──────────────────────────┘
                      │                   │
                      ▼                   ▼
               ┌─────────────────────┐ ┌─────────────────────┐
               │manage_memory_chat   │ │manage_memory_chat   │
               │_history             │ │_history             │
               └─────────┬───────────┘ └─────────┬───────────┘
                         │                       │
                         ▼                       ▼
               [END] 
```

